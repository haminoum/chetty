{"remainingRequest":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/babel-loader/lib/index.js!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue","mtime":1639873169478},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/babel.config.js","mtime":1639605913187},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639605629144},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/babel-loader/lib/index.js","mtime":1639605629091},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639605629144},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1639605675013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFNvY2tKUyBmcm9tICJzb2NranMtY2xpZW50IjsKaW1wb3J0IFN0b21wIGZyb20gIndlYnN0b21wLWNsaWVudCI7CmltcG9ydCBDaGF0V2luZG93IGZyb20gIi4vY29tcG9uZW50cy9DaGF0V2luZG93LnZ1ZSI7CmltcG9ydCB7IHJlZiB9IGZyb20gInZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgLy9UT0RPIGV4dGVybmFsaXplIHRvIGNvbmZpZyBmaWxlIG9yIGVudgogICAgdmFyIHVybCA9ICJodHRwOi8vMTI3LjAuMC4xOjgwODEvd3MiOwogICAgdmFyIGh0dHBVcmwgPSAiaHR0cDovLzEyNy4wLjAuMTo4MDgxIjsKICAgIHZhciBtZXNzYWdlVG9waWMgPSAiL3RvcGljL21lc3NhZ2VzIjsKICAgIHZhciBjb25uZWN0ZWQgPSByZWYoZmFsc2UpOwogICAgdmFyIHNvY2tldCA9IG51bGw7CiAgICB2YXIgd3MgPSByZWYobnVsbCk7CiAgICB2YXIgbWVzc2FnZXMgPSBbIkhlbGxvPyIsICJBcmUgeW91IGF2YWlsYWJsZT8iLCAiSSdtIGkgYWxvbmUgaW4gdGhlIGNoYXQ/ISJdOwogICAgdmFyIHVzZXJzID0gWyJIUiBNYW5hZ2VyIiwgIlByb2R1Y3QgT3duZXIiLCAiVGVjaCBMZWFkIl07CiAgICByZXR1cm4gewogICAgICBzb2NrZXQ6IHNvY2tldCwKICAgICAgdXNlcnM6IHVzZXJzLAogICAgICB3czogd3MsCiAgICAgIG1lc3NhZ2VUb3BpYzogbWVzc2FnZVRvcGljLAogICAgICBtZXNzYWdlczogbWVzc2FnZXMsCiAgICAgIHVybDogdXJsLAogICAgICBodHRwVXJsOiBodHRwVXJsLAogICAgICBjb25uZWN0ZWQ6IGNvbm5lY3RlZAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGpvaW5DaGF0OiBmdW5jdGlvbiBqb2luQ2hhdCgpIHsvL1RPRE8gc2V0IG1zZ1R5cGUgdG8gSk9JTiBhbmQgcHVzaCB1c2VyIHRvIHVzZXJzCiAgICB9LAogICAgbGVhdmVDaGF0OiBmdW5jdGlvbiBsZWF2ZUNoYXQoKSB7Ly9UT0RPIHNldCBtc2dUeXBlIHRvIExFQVZFIGFuZCByZW1vdmUgdXNlciB0byB1c2VycwogICAgfSwKICAgIGNvbm5lY3Q6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnNvY2tldCA9IG5ldyBTb2NrSlModGhpcy51cmwpOwogICAgICB0aGlzLndzID0gU3RvbXAub3Zlcih0aGlzLnNvY2tldCk7CiAgICAgIHRoaXMud3MuY29ubmVjdCh7fSwgZnVuY3Rpb24gKGZyYW1lKSB7CiAgICAgICAgX3RoaXMuY29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0bzoiLCBmcmFtZSk7CgogICAgICAgIF90aGlzLndzLnN1YnNjcmliZShfdGhpcy5tZXNzYWdlVG9waWMsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXMuYm9keSk7CiAgICAgICAgICBjb25zb2xlLmxvZygiRGF0YToiLCBkYXRhKTsKCiAgICAgICAgICBfdGhpcy5tZXNzYWdlcy5wdXNoKGRhdGEuY29udGVudCk7CiAgICAgICAgfSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBfdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZGlzY29ubmVjdDogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKICAgICAgaWYgKHRoaXMud3MpIHsKICAgICAgICB0aGlzLndzLmRpc2Nvbm5lY3QoKTsKICAgICAgfQoKICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbm5lY3QoKTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENoYXRXaW5kb3c6IENoYXRXaW5kb3cKICB9Cn07"},{"version":3,"sources":["/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue"],"names":[],"mappings":"AAwBA,OAAO,MAAP,MAAmB,eAAnB;AACA,OAAO,KAAP,MAAkB,iBAAlB;AACA,OAAO,UAAP,MAAuB,6BAAvB;AACA,SAAS,GAAT,QAAoB,KAApB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,KADO;AAEb,EAAA,IAFa,kBAEN;AACL;AACA,QAAM,GAAE,GAAI,0BAAZ;AACA,QAAM,OAAM,GAAI,uBAAhB;AACA,QAAM,YAAW,GAAI,iBAArB;AAEA,QAAI,SAAQ,GAAI,GAAG,CAAC,KAAD,CAAnB;AACA,QAAI,MAAK,GAAI,IAAb;AACA,QAAI,EAAC,GAAI,GAAG,CAAC,IAAD,CAAZ;AACA,QAAI,QAAO,GAAI,CACb,QADa,EAEb,oBAFa,EAGb,2BAHa,CAAf;AAKA,QAAI,KAAI,GAAI,CAAC,YAAD,EAAe,eAAf,EAAgC,WAAhC,CAAZ;AACA,WAAO;AACL,MAAA,MAAM,EAAN,MADK;AAEL,MAAA,KAAK,EAAL,KAFK;AAGL,MAAA,EAAE,EAAF,EAHK;AAIL,MAAA,YAAY,EAAZ,YAJK;AAKL,MAAA,QAAQ,EAAR,QALK;AAML,MAAA,GAAG,EAAH,GANK;AAOL,MAAA,OAAO,EAAP,OAPK;AAQL,MAAA,SAAS,EAAT;AARK,KAAP;AAUD,GA3BY;AA4Bb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACI,CACT;AACD,KAHM;AAIP,IAAA,SAJO,uBAIK,CACV;AACD,KANM;AAOP,IAAA,OAPO,qBAOG;AAAA;;AACR,WAAK,MAAL,GAAc,IAAI,MAAJ,CAAW,KAAK,GAAhB,CAAd;AACA,WAAK,EAAL,GAAU,KAAK,CAAC,IAAN,CAAW,KAAK,MAAhB,CAAV;AACA,WAAK,EAAL,CAAQ,OAAR,CACE,EADF,EAEE,UAAC,KAAD,EAAW;AACT,QAAA,KAAI,CAAC,SAAL,GAAiB,IAAjB;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,4BAAZ,EAA0C,KAA1C;;AACA,QAAA,KAAI,CAAC,EAAL,CAAQ,SAAR,CAAkB,KAAI,CAAC,YAAvB,EAAqC,UAAC,GAAD,EAAS;AAC5C,cAAI,IAAG,GAAI,IAAI,CAAC,KAAL,CAAW,GAAG,CAAC,IAAf,CAAX;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,OAAZ,EAAqB,IAArB;;AACA,UAAA,KAAI,CAAC,QAAL,CAAc,IAAd,CAAmB,IAAI,CAAC,OAAxB;AACD,SAJD;AAKD,OAVH,EAWE,UAAC,KAAD,EAAW;AACT,QAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACA,QAAA,KAAI,CAAC,SAAL,GAAiB,KAAjB;AACF,OAdF;AAgBD,KA1BM;AA2BP,IAAA,UA3BO,wBA2BM;AACX,UAAI,KAAK,EAAT,EAAa;AACX,aAAK,EAAL,CAAQ,UAAR;AACF;;AACA,WAAK,SAAL,GAAiB,KAAjB;AACD;AAhCM,GA5BI;AA8Db,EAAA,OA9Da,qBA8DH;AACR,SAAK,OAAL;AACD,GAhEY;AAiEb,EAAA,UAAU,EAAE;AACV,IAAA,UAAU,EAAV;AADU;AAjEC,CAAf","sourcesContent":["<template>\n  <div>\n    <h1 class=\"text-5xl font-bold underline m-2\">Chetty!</h1>\n    <div class=\"flex relative justify-center mx-auto items-center\">\n      <div v-if=\"connected\" class=\"text-green-600\">Connection: ONLINE</div>\n      <div v-else class=\"text-red-500\">\n        <span class=\"animate-bounce inline-flex bg-sky-400 opacity-85\"\n          >Connection: OFFLINE</span\n        >\n      </div>\n      <button v-if=\"!connected\" class=\"button-success\" @click=\"connect\">\n        Reconnect\n      </button>\n    </div>\n    <ChatWindow\n      :connected=\"connected\"\n      :users=\"users\"\n      :ws=\"ws\"\n      :messages=\"messages\"\n    />\n  </div>\n</template>\n\n<script>\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\";\nimport ChatWindow from \"./components/ChatWindow.vue\";\nimport { ref } from \"vue\";\n\nexport default {\n  name: \"App\",\n  data() {\n    //TODO externalize to config file or env\n    const url = \"http://127.0.0.1:8081/ws\";\n    const httpUrl = \"http://127.0.0.1:8081\";\n    const messageTopic = \"/topic/messages\";\n\n    var connected = ref(false);\n    var socket = null;\n    var ws = ref(null);\n    var messages = [\n      \"Hello?\",\n      \"Are you available?\",\n      \"I'm i alone in the chat?!\",\n    ];\n    var users = [\"HR Manager\", \"Product Owner\", \"Tech Lead\"];\n    return {\n      socket,\n      users,\n      ws,\n      messageTopic,\n      messages,\n      url,\n      httpUrl,\n      connected,\n    };\n  },\n  methods: {\n    joinChat() {\n      //TODO set msgType to JOIN and push user to users\n    },\n    leaveChat() {\n      //TODO set msgType to LEAVE and remove user to users\n    },\n    connect() {\n      this.socket = new SockJS(this.url);\n      this.ws = Stomp.over(this.socket);\n      this.ws.connect(\n        {},\n        (frame) => {\n          this.connected = true;\n          console.log(\"Successfully connected to:\", frame);\n          this.ws.subscribe(this.messageTopic, (res) => {\n            let data = JSON.parse(res.body);\n            console.log(\"Data:\", data);\n            this.messages.push(data.content);\n          });\n        },\n        (error) => {\n          console.log(error);\n          this.connected = false;\n        }\n      );\n    },\n    disconnect() {\n      if (this.ws) {\n        this.ws.disconnect();\n      }\n      this.connected = false;\n    },\n  },\n  created() {\n    this.connect();\n  },\n  components: {\n    ChatWindow,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n.button-primary {\n  @apply bg-blue-500 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-secondary {\n  @apply bg-yellow-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-success {\n  @apply bg-green-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-danger {\n  @apply bg-red-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n</style>\n"],"sourceRoot":""}]}