{"remainingRequest":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/babel-loader/lib/index.js!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue","mtime":1639873169478},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/babel.config.js","mtime":1639605913187},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639605629144},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/babel-loader/lib/index.js","mtime":1639605629091},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1639605675013},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1639605629144},{"path":"/Users/amin/Development/PROJECTS/chetty/chetty-frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1639605675013}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSB9IGZyb20gInZ1ZSI7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMSIsIHsKICBjbGFzczogInRleHQtNXhsIGZvbnQtYm9sZCB1bmRlcmxpbmUgbS0yIgp9LCAiQ2hldHR5ISIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiZmxleCByZWxhdGl2ZSBqdXN0aWZ5LWNlbnRlciBteC1hdXRvIGl0ZW1zLWNlbnRlciIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAga2V5OiAwLAogIGNsYXNzOiAidGV4dC1ncmVlbi02MDAiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGtleTogMSwKICBjbGFzczogInRleHQtcmVkLTUwMCIKfTsKCnZhciBfaG9pc3RlZF81ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgY2xhc3M6ICJhbmltYXRlLWJvdW5jZSBpbmxpbmUtZmxleCBiZy1za3ktNDAwIG9wYWNpdHktODUiCn0sICJDb25uZWN0aW9uOiBPRkZMSU5FIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzYgPSBbX2hvaXN0ZWRfNV07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfQ2hhdFdpbmRvdyA9IF9yZXNvbHZlQ29tcG9uZW50KCJDaGF0V2luZG93Iik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIG51bGwsIFtfaG9pc3RlZF8xLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbJGRhdGEuY29ubmVjdGVkID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMywgIkNvbm5lY3Rpb246IE9OTElORSIpKSA6IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzQsIF9ob2lzdGVkXzYpKSwgISRkYXRhLmNvbm5lY3RlZCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImJ1dHRvbiIsIHsKICAgIGtleTogMiwKICAgIGNsYXNzOiAiYnV0dG9uLXN1Y2Nlc3MiLAogICAgb25DbGljazogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkb3B0aW9ucy5jb25uZWN0ICYmICRvcHRpb25zLmNvbm5lY3QuYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9KQogIH0sICIgUmVjb25uZWN0ICIpKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9DaGF0V2luZG93LCB7CiAgICBjb25uZWN0ZWQ6ICRkYXRhLmNvbm5lY3RlZCwKICAgIHVzZXJzOiAkZGF0YS51c2VycywKICAgIHdzOiAkZGF0YS53cywKICAgIG1lc3NhZ2VzOiAkZGF0YS5tZXNzYWdlcwogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJjb25uZWN0ZWQiLCAidXNlcnMiLCAid3MiLCAibWVzc2FnZXMiXSldKTsKfQ=="},{"version":3,"sources":["/Users/amin/Development/PROJECTS/chetty/chetty-frontend/src/App.vue"],"names":[],"mappings":";;8BAEI,mBAAA,CAAyD,IAAzD,EAAyD;AAArD,EAAA,KAAK,EAAC;AAA+C,CAAzD,EAA6C,SAA7C,EAAoD,CAAA;AAAA;AAApD,C;;;AACK,EAAA,KAAK,EAAC;;;;AACa,EAAA,KAAK,EAAC;;;;AAChB,EAAA,KAAK,EAAC;;;8BAChB,mBAAA,CAEC,MAFD,EAEC;AAFK,EAAA,KAAK,EAAC;AAEX,CAFD,EACG,qBADH,EACsB,CAAA;AAAA;AADtB,C;;kBAAA,U;;;;uBALN,mBAAA,CAmBM,KAnBN,EAmBM,IAnBN,EAmBM,CAlBJ,UAkBI,EAjBJ,mBAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATO,KAAA,CAAA,S,kBAAX,mBAAA,CAAqE,KAArE,EAAA,UAAA,EAA6C,oBAA7C,C,mBACA,mBAAA,CAIM,KAJN,EAAA,UAAA,EAIM,UAJN,C,CAQI,E,CAHW,KAAA,CAAA,S,kBAAf,mBAAA,CAES,QAFT,EAES;UAAA;AAFiB,IAAA,KAAK,EAAC,gBAEvB;AAFyC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,OAAA,IAAA,QAAA,CAAA,OAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAE9C,GAFT,EAAkE,aAAlE,C,qCAGI,CAVN,CAiBI,EANJ,YAAA,CAKE,qBALF,EAKE;AAJC,IAAA,SAAS,EAAE,KAAA,CAAA,SAIZ;AAHC,IAAA,KAAK,EAAE,KAAA,CAAA,KAGR;AAFC,IAAA,EAAE,EAAE,KAAA,CAAA,EAEL;AADC,IAAA,QAAQ,EAAE,KAAA,CAAA;AACX,GALF,E,IAAA,E;;AAAA,I,wCAAA,CAMI,CAnBN,C","sourcesContent":["<template>\n  <div>\n    <h1 class=\"text-5xl font-bold underline m-2\">Chetty!</h1>\n    <div class=\"flex relative justify-center mx-auto items-center\">\n      <div v-if=\"connected\" class=\"text-green-600\">Connection: ONLINE</div>\n      <div v-else class=\"text-red-500\">\n        <span class=\"animate-bounce inline-flex bg-sky-400 opacity-85\"\n          >Connection: OFFLINE</span\n        >\n      </div>\n      <button v-if=\"!connected\" class=\"button-success\" @click=\"connect\">\n        Reconnect\n      </button>\n    </div>\n    <ChatWindow\n      :connected=\"connected\"\n      :users=\"users\"\n      :ws=\"ws\"\n      :messages=\"messages\"\n    />\n  </div>\n</template>\n\n<script>\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\";\nimport ChatWindow from \"./components/ChatWindow.vue\";\nimport { ref } from \"vue\";\n\nexport default {\n  name: \"App\",\n  data() {\n    //TODO externalize to config file or env\n    const url = \"http://127.0.0.1:8081/ws\";\n    const httpUrl = \"http://127.0.0.1:8081\";\n    const messageTopic = \"/topic/messages\";\n\n    var connected = ref(false);\n    var socket = null;\n    var ws = ref(null);\n    var messages = [\n      \"Hello?\",\n      \"Are you available?\",\n      \"I'm i alone in the chat?!\",\n    ];\n    var users = [\"HR Manager\", \"Product Owner\", \"Tech Lead\"];\n    return {\n      socket,\n      users,\n      ws,\n      messageTopic,\n      messages,\n      url,\n      httpUrl,\n      connected,\n    };\n  },\n  methods: {\n    joinChat() {\n      //TODO set msgType to JOIN and push user to users\n    },\n    leaveChat() {\n      //TODO set msgType to LEAVE and remove user to users\n    },\n    connect() {\n      this.socket = new SockJS(this.url);\n      this.ws = Stomp.over(this.socket);\n      this.ws.connect(\n        {},\n        (frame) => {\n          this.connected = true;\n          console.log(\"Successfully connected to:\", frame);\n          this.ws.subscribe(this.messageTopic, (res) => {\n            let data = JSON.parse(res.body);\n            console.log(\"Data:\", data);\n            this.messages.push(data.content);\n          });\n        },\n        (error) => {\n          console.log(error);\n          this.connected = false;\n        }\n      );\n    },\n    disconnect() {\n      if (this.ws) {\n        this.ws.disconnect();\n      }\n      this.connected = false;\n    },\n  },\n  created() {\n    this.connect();\n  },\n  components: {\n    ChatWindow,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n.button-primary {\n  @apply bg-blue-500 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-secondary {\n  @apply bg-yellow-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-success {\n  @apply bg-green-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n.button-danger {\n  @apply bg-red-400 text-white rounded-full p-2 m-2 shadow-md text-lg font-semibold;\n}\n</style>\n"],"sourceRoot":""}]}